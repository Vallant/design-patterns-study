\chapter{Results}
\label{sec:results}
In order to make serious statements about the quality of the code and the effects of using the design patterns some indicators were chosen to compare the two application types. Because the two programs are similar in its work-flow and basic structure these comparisons are actually meaningful.

This section only lists the findings while section \ref{sec:discussion} puts the results into context and explains them.

\section{Lines of Code}
\label{sec:line-count}
In Table \ref{table:lines-of-code} the total lines programmed for both programs and the phases are listed. This is counted by using simple command-line tools on the different branches of the program. In figure \ref{fig:lines-of-code} the  increase in lines of code can be seen. It is notable that the best practice implementation consists of more total lines of code in all phases. 

Due to the use of interfaces in java a lot of annotations were necessary which in fact do not have any significance to the topic. Thus the adjusted line count excludes lines that only hold the \texttt{@Override}-Annotation.

\begin{table}[htbp]
	\centering

	\begin{tabular}{|c|c|c|c|c|} \hline
	\textbf{Program version} &\textbf{Phase 1} & \textbf{Phase 2} & \textbf{Phase 3} \\ \hline
	Best practice & 9264 & 12275 (+ 32\%)& 13306 (+ 8\%)\\ \hline
	Best practice (adjusted) & 8804 & 11764 (+ 34\%)& 12750 (+ 8\%)\\ \hline
	Ad-hoc & 7572 & 11172 (+ 48\%)& 12168 (+ 9\%)\\ \hline
	\end{tabular}
	\caption{Lines of code for both program versions and all phases}
	\label{table:lines-of-code}
\end{table}

\begin{figure}[htbp]
	\centering

	\begin{tikzpicture}
	\begin{axis}[
	height=0.6\textwidth,
	xlabel={Phases},
	ylabel={Lines of Code},
	y label style={at={(axis description cs:-0.1,.5)}},
	xmin=0, xmax=4,
	ymin=6000, ymax=14000,
	xtick={1,2,3},
	ytick={6000, 8000, 10000, 12000, 14000},
	legend pos=south east,
	ymajorgrids=true,
	grid style=dashed,
	scaled ticks=false, 
	tick label style={/pgf/number format/fixed} 
	]
	
	\addplot[
	color=blue,
	mark=x,
	]
	coordinates {
		(1,9205.0)(2,12275.0)(3,13306.0)
	};
	
	\addplot[
	color=green,
	mark=*,
	]
	coordinates {
		(1,8804)(2,11764)(3,12750)
	};

	\addplot[
	color=red,
	mark=square,
	]
	coordinates {
		(1,7572)(2,11172)(3,12168)
	};
	\legend{Best Practice, Best Practice (adjusted), Ad-hoc}
	
	\end{axis}
	
	\end{tikzpicture}
	\caption[Lines of Code for both program versions and all phases.]{Lines of Code for both program versions and all phases. The best practice implementation of the program both in the adjusted and original version consists of more code lines in all phases.}
	\label{fig:lines-of-code}
\end{figure}


\section{Touched and Edited Files}
\label{sec:file-count}
The development of the file count is listed in this section. Table \ref{table:files} and figure \ref{fig:files} shows how many files are needed for the programs while table \ref{table:touched-files} list the number of files that were modified or created during the implementation of the requirements.

\begin{table}
	\centering
	\begin{tabular}{|c|c|c|c|c|} \hline
		\textbf{Program version} &\textbf{Phase 1} & \textbf{Phase 2} & \textbf{Phase 3} \\ \hline
		Best practice & 96 & 125 & 131 \\ \hline
		Ad-hoc & 59 & 88 & 89 \\ \hline
	\end{tabular}
	\caption{Total number of files for both program versions and all phases}
	\label{table:files}
\end{table}

\begin{figure}
	\centering

	\begin{tikzpicture}
	\begin{axis}[
	xlabel={Phases},
	ylabel={Total number of files},
	y label style={at={(axis description cs:-0.1,.5)}},
	xmin=0, xmax=4,
	ymin=50, ymax=150,
	xtick={1,2,3},
	ytick={50, 70, 90, 110, 130, 150},
	legend pos=south east,
	ymajorgrids=true,
	grid style=dashed,
	scaled ticks=false, 
	tick label style={/pgf/number format/fixed} 
	]
	
	\addplot[
	color=blue,
	mark=square,
	]
	coordinates {
		(1,96)(2,125)(3,131)
	};
	
	\addplot[
	color=red,
	mark=square,
	]
	coordinates {
		(1,59)(2,88)(3,89)
	};
	\legend{Best Practice, Ad-hoc}
	
	\end{axis}
	
	\end{tikzpicture}
	\caption{Total number of files for both program versions and all phases}
	\label{fig:files}
\end{figure}

 \begin{table}
 	\centering

 	\begin{tabular}{|c|c|c|} \hline
 		\textbf{Program version} &\textbf{Phase 1 to Phase 2} & \textbf{Phase 2 to Phase 3} \\ \hline
 		Best practice & 30 & 7 \\ \hline
 		Ad-hoc & 39 & 13\\ \hline
 	\end{tabular}
 	\caption{Number of files modified or added for both program versions and all phases} 	\label{table:touched-files}
 \end{table}

\section{Average line count per file}
\label{sec:avg-line-count}
Another interesting aspect of the data is the comparison of the average line count per file, as it can be seen in table \ref{table:avg-lines} and chart \ref{fig:avg-lines}. The results are rounded.

\begin{table}
	\centering

	\begin{tabular}{|c|c|c|c|} \hline
		\textbf{Program version} &\textbf{Phase 1} & \textbf{Phase 2} & \textbf{Phase 3} \\ \hline
		Best practice & 96 & 98 & 102 \\ \hline
		Best practice (adjusted) & 92 & 94 & 97\\ \hline
		Ad-hoc & 128 & 127 & 137 \\ \hline
	\end{tabular}
	\caption{Average lines per file for both program versions and all phases}
	\label{table:avg-lines}
\end{table}

\begin{figure}

	\centering
	\begin{tikzpicture}
	\begin{axis}[
	xlabel={Phases},
	ylabel={Lines of Code per file},
	y label style={at={(axis description cs:-0.1,.5)}},
	xmin=0, xmax=4,
	ymin=50, ymax=150,
	xtick={1,2,3},
	ytick={50, 70, 90, 110, 130, 150},
	legend pos=south east,
	ymajorgrids=true,
	grid style=dashed,
	scaled ticks=false, 
	tick label style={/pgf/number format/fixed} 
	]
	
	\addplot[
	color=blue,
	mark=square,
	]
	coordinates {
		(1,96)(2,98)(3,102)
	};

	\addplot[
	color=green,
	mark=square,
	]
	coordinates {
		(1,92)(2,94)(3,97)
	};
	
	\addplot[
	color=red,
	mark=square,
	]
	coordinates {
		(1,128)(2,127)(3,137)
	};
	\legend{Best Practice, Best Practice (adjusted), Ad-hoc}
	
	\end{axis}
	
	\end{tikzpicture}
	\caption{Average lines of code per file for both program versions and all phases}
	\label{fig:avg-lines}
\end{figure}

\section{Code Complexity Analysis with SonarQube}
\label{sec:complexity}
By using the static code analysis tool \emph{SonarQube}\footnote{\href{http://www.sonarqube.org/}{http://www.sonarqube.org/}, accessed 25.9.2017, Open Source and licensed under LGPLv3} it is possible to get additional information about the code complexity in terms of cyclomatic complexity. This metric was invented by Thomas J McCabe in 1976 and counts the independent paths that exist in a program or module \cite{cyclo}. In the case of SonarQube this means that the Java-statements \texttt{if}, \texttt{for}, \texttt{while}, \texttt{case}, \texttt{catch}, \texttt{throw}, \texttt{return}, \texttt{\&\&}, \texttt{||} and \texttt{?} increase the complexity\footnote{For more details please refer to the documentation at the tools website under \href{https://docs.sonarqube.org/display/SONAR/Metrics+-+Complexity}{https://docs.sonarqube.org/display/SONAR/Metrics+-+Complexity}, accessed 25.9.2017.}

After analysing the code the following results could be obtained. Table \ref{table:total-complexity} shows the overall complexity of the two implementations and its associated chart \ref{fig:total-complexity} visualizes the data. Table \ref{table:file-complexity} also states the complexity of the code per source code file.

\begin{table}[htbp]
	\centering
	\begin{tabular}{|c|c|c|c|} \hline
		\textbf{Program version} &\textbf{Phase 1} & \textbf{Phase 2} & \textbf{Phase 3} \\ \hline
		Best Practice & 795 & 1089 (+ 36\%)& 1191 (+ 9\%)\\ \hline
		Ad-Hoc & 779 & 1205 (+ 55\%)& 1335 (+ 10\%)\\ \hline
	\end{tabular}
	\caption{Overall Code complexity.}
	\label{table:total-complexity}
\end{table}

\begin{figure}[htbp]
	
	\centering
	\begin{tikzpicture}
	\begin{axis}[
	xlabel={Phases},
	ylabel={Code Complexity},
	y label style={at={(axis description cs:-0.1,.5)}},
	xmin=0, xmax=4,
	ymin=700, ymax=1500,
	xtick={1,2,3},
	ytick={700, 900, 1100, 1300, 1500},
	legend pos=south east,
	ymajorgrids=true,
	grid style=dashed,
	scaled ticks=false, 
	tick label style={/pgf/number format/fixed} 
	]
	
	\addplot[
	color=blue,
	mark=square,
	]
	coordinates {
		(1,795)(2,1089)(3,1191)
	};
	
	\addplot[
	color=red,
	mark=square,
	]
	coordinates {
		(1,779)(2,1205)(3,1335)
	};
	\legend{Best Practice , Ad-hoc}
	
	\end{axis}
	
	\end{tikzpicture}
	\caption{Overall code complexity both program versions and all phases}
	\label{fig:total-complexity}
\end{figure}

\begin{table}[htbp]
		\centering
	\begin{tabular}{|c|c|c|c|} \hline
		\textbf{Program version} &\textbf{Phase 1} & \textbf{Phase 2} & \textbf{Phase 3} \\ \hline
		Best Practice & 8,3 & 8,7 & 9,1 \\ \hline
		Ad-Hoc & 13,2 & 13,7 & 15,0 \\ \hline
	\end{tabular}
	\caption{Code complexity per file}
	\label{table:file-complexity}
\end{table}
